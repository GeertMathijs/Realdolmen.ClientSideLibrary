"use strict";var RD=window.RD||{__namespace:!0};RD.Libraries=RD.Libraries||{__namespace:!0};RD.Libraries.CustomControls=RD.Libraries.CustomControls||{__namespace:!0},function(){this.fieldPlaceholder="--";this.Initialize=function(){if(typeof $=="undefined"){RD.Helpers.Log("jQuery is required for the CRM Custom controls to work.");return}if($("label").parent().addClass("labelcol"),typeof $.datepicker=="undefined")RD.Helpers.Log("jQuery UI datepicker widget is not available.");else{$(".datetime").datepicker({inline:!0,nextText:"&rarr;",prevText:"&larr;",showOtherMonths:!0,dateFormat:"dd/mm/yy",dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],showOn:"button",buttonImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAVCAYAAADb2McgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAADeSURBVEhL7ZZRCoMwEEQ3vVL6o7TXiWdKrlPwKzmT3Q1L2BK1RoMo5EFwnORj2FFRTQhcnAdfL00LWYtbhMxeHPV0rPYxecOqHllI546FNKZ+SKCQEmstq2O6JuXPZAighwGCUnGRJm8r/btn9cuSTxTVHTCMwX2HlWqtZ721umWQ8TOyWvYTcZ6CtSo9Hfc+P4Me7Ul/ie7VpTV3P8fpn6CiCTKn1i3ZGjAS5ynIqmSS5mrlIo/YUrdkrWJJed04rWAtaCyAFmny9vB3gswtPuZZyCvS/oJq0ULWAeALRYQdLZ4CEX0AAAAASUVORK5CYII=",buttonImageOnly:!0});var n=null;$(".ui-datepicker-trigger").mousedown(function(){n=$(this);$(this).css("visibility","visible")});$(".datetime").blur(function(t){n!=null&&$(this).next()[0]==n[0]?(t.preventDefault(),$(this).focus(),n=null):$(this).next().removeAttr("style")});$(".datetime").parent().addClass("relativePosition")}$("a[data-inlineEdit] span").click(function(n){var t=$(this).text(),i,r,u,f;t!=RD.Libraries.CustomControls.fieldPlaceholder&&(i=$(this).parent().attr("data-type"),i=="url"?(t.indexOf("http://")!=0&&t.indexOf("https://")!=0&&(t="http://"+t),window.open(t,"_blank")):i=="tel"?(t.indexOf("tel:")!=0&&(t="tel:"+t),window.location.href=t):i=="email"?(t.indexOf("mailto:")!=0&&(t="mailto:"+t),window.location.href=t):i=="lookup"&&(r=$(this).prev().val(),u=$(this).parent().attr("data-entity"),typeof Xrm!="undefined"&&(f={openInNewWindow:!0},Xrm.Utility.openEntityForm(u,r,null,f))),n.stopPropagation())});$("a[data-inlineEdit='true']").click(function(){var n=$(this),i=$(this).children("span"),u=$(this).attr("readonly"),r,t;typeof u=="undefined"&&(n.hide(),r=typeof n.attr("data-type")=="undefined"?"url":n.attr("data-type"),t=n.next(),t.css("z-index",150),t.val(i.text()==RD.Libraries.CustomControls.fieldPlaceholder?"":i.text()),t.focus(),t.blur(function(){$(this).remove();var t=$(this).val();t==""?t=RD.Libraries.CustomControls.fieldPlaceholder:r=="url"&&t.indexOf("http://")!=0&&t.indexOf("https://")!=0&&(t="http://"+t);i.text(t);n.show()}))});$("select").parent().addClass("relativePosition");$(".selectValue").click(function(){var t=$(this),n=t.next("select");n.show();n.focus();n.change(function(){var i=$(this).children("option:selected").first().text();i==""&&(i=RD.CustomControls.fieldPlaceholder);t.text(i);n.hide()});n.blur(function(){n.hide()})});$(".lookupicon").remove();$("a[data-type='lookup']").after('<img class="lookupicon" src="data:image/gif;base64,R0lGODlhFAAVAEAAACH5BAEAABAALAAAAAAUABUAhwAAAAAAMwAAZgAAmQAAzAAA/wArAAArMwArZgArmQArzAAr/wBVAABVMwBVZgBVmQBVzABV/wCAAACAMwCAZgCAmQCAzACA/wCqAACqMwCqZgCqmQCqzACq/wDVAADVMwDVZgDVmQDVzADV/wD/AAD/MwD/ZgD/mQD/zAD//zMAADMAMzMAZjMAmTMAzDMA/zMrADMrMzMrZjMrmTMrzDMr/zNVADNVMzNVZjNVmTNVzDNV/zOAADOAMzOAZjOAmTOAzDOA/zOqADOqMzOqZjOqmTOqzDOq/zPVADPVMzPVZjPVmTPVzDPV/zP/ADP/MzP/ZjP/mTP/zDP//2YAAGYAM2YAZmYAmWYAzGYA/2YrAGYrM2YrZmYrmWYrzGYr/2ZVAGZVM2ZVZmZVmWZVzGZV/2aAAGaAM2aAZmaAmWaAzGaA/2aqAGaqM2aqZmaqmWaqzGaq/2bVAGbVM2bVZmbVmWbVzGbV/2b/AGb/M2b/Zmb/mWb/zGb//5kAAJkAM5kAZpkAmZkAzJkA/5krAJkrM5krZpkrmZkrzJkr/5lVAJlVM5lVZplVmZlVzJlV/5mAAJmAM5mAZpmAmZmAzJmA/5mqAJmqM5mqZpmqmZmqzJmq/5nVAJnVM5nVZpnVmZnVzJnV/5n/AJn/M5n/Zpn/mZn/zJn//8wAAMwAM8wAZswAmcwAzMwA/8wrAMwrM8wrZswrmcwrzMwr/8xVAMxVM8xVZsxVmcxVzMxV/8yAAMyAM8yAZsyAmcyAzMyA/8yqAMyqM8yqZsyqmcyqzMyq/8zVAMzVM8zVZszVmczVzMzV/8z/AMz/M8z/Zsz/mcz/zMz///8AAP8AM/8AZv8Amf8AzP8A//8rAP8rM/8rZv8rmf8rzP8r//9VAP9VM/9VZv9Vmf9VzP9V//+AAP+AM/+AZv+Amf+AzP+A//+qAP+qM/+qZv+qmf+qzP+q///VAP/VM//VZv/Vmf/VzP/V////AP//M///Zv//mf//zP///wAAAAAAAAAAAAAAAAhuAPcJHEiwoMGDCBMqXMhQoTJimYg13KcMjRgxFsUoYzhJDDFoFC1uTEjsxkiByjAqzCTGIEuFFg0S05jwZUE3LUmKyURwJs+EKTESU8YSzUmDKdFkvDgJJMKgP6Epc5rQ4s+JAiVi3cq1q9eEAQEAOw=="/>');$("a[data-type='lookup']").parent().addClass("relativePosition");$(".lookupicon").hover(function(){$(this).prev().addClass("hover")}).mouseleave(function(){$(this).prev().removeClass("hover")}).click(function(){var e=$(this).prev().children("input:hidden"),s=$(this).prev(),o=$(this).prev().children("input:text"),f,n;if(typeof Xrm!="undefined"){var i=$(this).prev().attr("data-typecode"),r=$(this).prev().attr("data-defaultviewid"),u=$(this).prev().attr("data-disableviewpicker"),t=new Xrm.DialogOptions;t.width=800;t.height=600;f=Xrm.Page.context.getClientUrl();n=f;n+="/_controls/lookup/lookupsingle.aspx?";n+="&browse=0";n+="&ShowNewButton=0";n+="&ShowPropButton=1";n+="&DefaultType="+i;n+="&objecttypes="+i;r&&(n+="&DefaultViewId="+r);u&&(n+="&DisableViewPicker="+u);n+="&AllowFilterOff=0";n+="&DisableQuickFind=0";Xrm.Internal.openDialog(n,t,null,null,function(n){var t=n.items[0].name,i=n.items[0].id;o.val(t).change();e.val(i).change()})}});$("a[data-inlineEdit='true'] span").each(function(){$(this).text()==""&&$(this).text(RD.Libraries.CustomControls.fieldPlaceholder)})}}.call(RD.Libraries.CustomControls);